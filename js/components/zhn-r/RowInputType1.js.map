{"version":3,"sources":["../../../src/components/zhn-r/RowInputType1.jsx"],"names":["round10","fnMath","_isFn","fn","RowInputType1","props","_handleOnChange","value","onChange","_handleChangeSlider","event","_refTextComp","current","setValue","_handleChangeText","min","max","_value","stepExp","parseFloat","parseInt","_refSliderComp","_arr","step","split","length","render","styleInput","name","caption","initValue","inputId","unit","rest","S","CL_ROW","CL_CAPTION","RIGHT","Component","defaultProps"],"mappings":"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","sourcesContent":["import { Component, createRef } from 'preact'\r\n\r\nimport fnMath from '../../utils/math'\r\n\r\nimport A from '../zhn/A'\r\nimport S from './style'\r\n\r\nconst { round10 } = fnMath;\r\nconst _isFn = fn => typeof fn === 'function';\r\n\r\nclass RowInputType1 extends Component {\r\n  /*\r\n   static propTypes = {\r\n     style: PropTypes.object,\r\n     styleInput: PropTypes.object,\r\n\r\n     caption: PropTypes.string,\r\n     initValue: PropTypes.number,\r\n     min: PropTypes.number,\r\n     max: PropTypes.number,\r\n     step: PropTypes.number,\r\n     unit: PropTypes.string,\r\n\r\n     onChange: PropTypes.func\r\n   }\r\n   */\r\n\r\n   static defaultProps = {\r\n     unit: 'px',\r\n     step: 1\r\n   }\r\n\r\n   constructor(props){\r\n     super(props)\r\n\r\n     this._refTextComp = createRef()\r\n     this._refSliderComp = createRef()\r\n\r\n     const _arr = (''+props.step).split('.');\r\n     this.stepExp = _arr[1] ? -1 * _arr[1].length : 0\r\n   }\r\n\r\n _handleOnChange = (value) => {\r\n   const { onChange } = this.props\r\n   if (_isFn(onChange)) {\r\n     onChange(value)\r\n   }\r\n }\r\n\r\n  _handleChangeSlider = (event, value) => {\r\n    this.value = value\r\n    this._refTextComp.current.setValue(value)\r\n    this._handleOnChange(value)\r\n  }\r\n\r\n  _handleChangeText = (value) => {\r\n    const { min, max } = this.props\r\n    , _value = this.stepExp !== 0\r\n        ? round10(parseFloat(value), this.stepExp)\r\n        : parseInt(value, 10);\r\n\r\n    if ( _value>=min && _value<=max ){\r\n      this.value = _value\r\n      this._refSliderComp.current.setValue(_value)\r\n      this._handleOnChange(value)\r\n    }\r\n  }\r\n\r\n  render(){\r\n    const {\r\n      styleInput,\r\n      name, caption,\r\n      initValue, inputId,\r\n      unit,\r\n      min, max, step,\r\n      ...rest\r\n    } = this.props\r\n    return (\r\n      <div className={S.CL_ROW}>\r\n        {/*eslint-disable jsx-a11y/label-has-for*/}\r\n        <label className={S.CL_CAPTION}>\r\n          <span>{caption}</span>\r\n          <span style={S.RIGHT}>{unit}</span>\r\n          <A.InputText\r\n             innerRef={this._refTextComp}\r\n             style={{ ...S.RIGHT, ...styleInput }}\r\n             type=\"number\"\r\n             name={name}\r\n             inputId={inputId}\r\n             initValue={initValue}\r\n             step={step}\r\n             min={min}\r\n             max={max}\r\n             onChange={this._handleChangeText}\r\n          />\r\n        </label>\r\n        {/*eslint-enable jsx-a11y/label-has-for*/}\r\n        <A.InputSlider\r\n           ref={this._refSliderComp}\r\n           {...rest}\r\n           inputId={inputId}\r\n           step={step}\r\n           min={min}\r\n           max={max}\r\n           initValue={initValue}\r\n           onChange={this._handleChangeSlider}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RowInputType1\r\n"],"file":"RowInputType1.js"}