{"version":3,"sources":["../../src/components/memo.js"],"names":["assign","obj","props","i","shallowDiffers","a","b","memo","c","comparer","shouldUpdate","nextProps","ref","updateRef","call","current","Memoed","shouldComponentUpdate","prototype","isReactComponent","displayName","name","_forwarded"],"mappings":";;;;;AACA;;AADA;AAGA,SAASA,MAAT,CAAgBC,GAAhB,EAAqBC,KAArB,EAA4B;AAC3B,OAAK,IAAIC,CAAT,IAAcD,KAAd;AAAqBD,IAAAA,GAAG,CAACE,CAAD,CAAH,GAASD,KAAK,CAACC,CAAD,CAAd;AAArB;;AACA,SAAQF,GAAR;AACA;;AAED,SAASG,cAAT,CAAwBC,CAAxB,EAA2BC,CAA3B,EAA8B;AAC7B,OAAK,IAAIH,CAAT,IAAcE,CAAd;AAAiB,QAAIF,CAAC,KAAK,UAAN,IAAoB,EAAEA,CAAC,IAAIG,CAAP,CAAxB,EAAmC,OAAO,IAAP;AAApD;;AACA,OAAK,IAAIH,EAAT,IAAcG,CAAd;AAAiB,QAAIH,EAAC,KAAK,UAAN,IAAoBE,CAAC,CAACF,EAAD,CAAD,KAASG,CAAC,CAACH,EAAD,CAAlC,EAAuC,OAAO,IAAP;AAAxD;;AACA,SAAO,KAAP;AACA;;AAEc,SAASI,IAAT,CAAcC,CAAd,EAAiBC,QAAjB,EAA2B;AACzC,WAASC,YAAT,CAAsBC,SAAtB,EAAiC;AAChC,QAAIC,GAAG,GAAG,KAAKV,KAAL,CAAWU,GAArB;AACA,QAAIC,SAAS,GAAGD,GAAG,IAAID,SAAS,CAACC,GAAjC;;AACA,QAAI,CAACC,SAAD,IAAcD,GAAlB,EAAuB;AACtBA,MAAAA,GAAG,CAACE,IAAJ,GAAWF,GAAG,CAAC,IAAD,CAAd,GAAwBA,GAAG,CAACG,OAAJ,GAAc,IAAtC;AACA;;AAED,QAAI,CAACN,QAAL,EAAe;AACd,aAAOL,cAAc,CAAC,KAAKF,KAAN,EAAaS,SAAb,CAArB;AACA;;AAED,WAAO,CAACF,QAAQ,CAAC,KAAKP,KAAN,EAAaS,SAAb,CAAT,IAAoC,CAACE,SAA5C;AACA;;AAED,WAASG,MAAT,CAAgBd,KAAhB,EAAuB;AACtB,SAAKe,qBAAL,GAA6BP,YAA7B;AACA,WAAO,2BAAcF,CAAd,EAAiBR,MAAM,CAAC,EAAD,EAAKE,KAAL,CAAvB,CAAP;AACA;;AACDc,EAAAA,MAAM,CAACE,SAAP,CAAiBC,gBAAjB,GAAoC,IAApC;AACAH,EAAAA,MAAM,CAACI,WAAP,GAAqB,WAAWZ,CAAC,CAACY,WAAF,IAAiBZ,CAAC,CAACa,IAA9B,IAAsC,GAA3D;AACAL,EAAAA,MAAM,CAACM,UAAP,GAAoB,IAApB;AACA,SAAON,MAAP;AACA","sourcesContent":["//preact/compat memo.js\r\nimport { createElement } from 'preact';\r\n\r\nfunction assign(obj, props) {\r\n\tfor (let i in props) obj[i] = props[i];\r\n\treturn (obj);\r\n}\r\n\r\nfunction shallowDiffers(a, b) {\r\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\r\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\r\n\treturn false;\r\n}\r\n\r\nexport default function memo(c, comparer) {\r\n\tfunction shouldUpdate(nextProps) {\r\n\t\tlet ref = this.props.ref;\r\n\t\tlet updateRef = ref == nextProps.ref;\r\n\t\tif (!updateRef && ref) {\r\n\t\t\tref.call ? ref(null) : (ref.current = null);\r\n\t\t}\r\n\r\n\t\tif (!comparer) {\r\n\t\t\treturn shallowDiffers(this.props, nextProps);\r\n\t\t}\r\n\r\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\r\n\t}\r\n\r\n\tfunction Memoed(props) {\r\n\t\tthis.shouldComponentUpdate = shouldUpdate;\r\n\t\treturn createElement(c, assign({}, props));\r\n\t}\r\n\tMemoed.prototype.isReactComponent = true;\r\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\r\n\tMemoed._forwarded = true;\r\n\treturn Memoed;\r\n}\r\n"],"file":"memo.js"}